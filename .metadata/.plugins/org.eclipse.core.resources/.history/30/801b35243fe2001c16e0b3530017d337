package com.jafa.dto;

public class PageMaker {

	private Criteria criteria;
	private int totalCount;
	private int startPage;
	private int endPage;
	private boolean perv;
	private boolean next;
	private int displayPageNum = 10;

	
	public Criteria getCriteria() {
		return criteria;
	}

	public void setCriteria(Criteria criteria) {
		this.criteria = criteria;
	}

	public int getTotalCount() {
		return totalCount;
	}

	public void setTotalCount(int totalCount) {
		this.totalCount = totalCount;
		calcData();
		//토탈 카운트를 부를때 calcData가 실행되도록 하는것
	}

	private void calcData() {

		endPage = (int) (Math.ceil(criteria.getPage() / (double) displayPageNum) * displayPageNum);
		// 끝 페이지 번호 = (현재 페이지 번호 / 화면에 보여질 페이지 번호 갯수) * 화면에 보여질 페이지 번호 갯수
		
		startPage = (endPage - displayPageNum) + 1;
		//시작페이지 번호 = (끝페이지 번호-화면에 보여질 페이지 번호 갯수) + 1
		if (startPage <= 0)
			startPage = 1;

		int tempEndPage = (int) (Math.ceil(totalCount / (double) criteria.getPerPageNum()));
		// 임시마지막페이지 = (전체페이지수 / 한페이지에 보여지는 게시글 수)
		if (endPage > tempEndPage) endPage = tempEndPage;

		perv = startPage != 1;
		// 이전 버튼은 시작페이지가 1이면 생성하지 않고, 아닌 경우에는 모두 생성
		next = endPage < tempEndPage;
		// 다음 버튼은 (끝페이지 번호 * 한페이지당 보여줄 글 갯수) < 총 게시글 수 이면  생성, 아니면 생성안함
	}

	public int getStartPage() {
		return startPage;
	}

	public void setStartPage(int startPage) {
		this.startPage = startPage;
	}

	public int getEndPage() {
		return endPage;
	}

	public void setEndPage(int endPage) {
		this.endPage = endPage;
	}

	public boolean isPerv() {
		return perv;
	}

	public void setPerv(boolean perv) {
		this.perv = perv;
	}

	public boolean isNext() {
		return next;
	}

	public void setNext(boolean next) {
		this.next = next;
	}

	public int getDisplayPageNum() {
		return displayPageNum;
	}

	public void setDisplayPageNum(int displayPageNum) {
		this.displayPageNum = displayPageNum;
	}

}
